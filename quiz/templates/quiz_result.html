{% extends 'base.html' %}

{% block title %}Quiz Result{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1 class="text-center">{{ quiz.quiz_title }}</h1>
    <p class="text-muted text-center">Your results for this quiz</p>

    <div class="alert alert-info text-center">
        <h4>Score: <strong>{{ attempt.score }}</strong> / <strong>{{ attempt.quiz.total_marks }}</strong></h4>
    </div>

    <h2></h2>
    <div class="quiz-answers">
        {% for answer in student_answers %}
        <div class="mb-3">
            <h5 class="card-title" style="white-space: pre-line;">
                <strong>Question {{ forloop.counter }}:</strong><br>
                {{ answer.question.question_text|linebreaksbr }}
            </h5>

            <ul class="list-group">
                {% for option in answer.question.answer_options.all %}
                <li class="list-group-item {% if option.is_correct %}list-group-item-success{% elif option == answer.selected_option %}list-group-item-danger{% endif %}">
                    {{ option.option_text }}
                    {% if option == answer.selected_option %}
                        {% if option.is_correct %}
                        <span class="badge bg-success float-end"><i class="fas fa-check"></i></span>
                        {% else %}
                        <span class="badge bg-danger float-end"><i class="fas fa-times"></i></span>
                        {% endif %}
                    {% endif %}
                    {% if option.is_correct and option != answer.selected_option %}
                    <span class="badge bg-success float-end"><i class="fas fa-check"></i></span>
                    {% endif %}
                </li>
                {% endfor %}
            </ul>
        </div>
        {% endfor %}
    </div>

    <div class="text-center mt-4">
        <a href="{% url 'quiz:quiz_list' %}" class="btn btn-primary">Back to Quizzes</a>
    </div>
</div>
{% endblock %}
